var express = require('express');
var router = express.Router();
const nodemailer = require('nodemailer');

let transporter = nodemailer.createTransport({
  service: 'Gmail',
  auth: {
    user: process.env.USER,
    pass: process.env.PASS
  }
});

// setup email data with unicode symbols
let mailOptions = {
    from: '"Fred Foo ðŸ‘»" <foo@blurdybloop.com>', // sender address
    to: 'pride.ots@gmail.com', // list of receivers
    subject: 'Hello âœ”', // Subject line
    text: 'Hello world ?', // plain text body
    html: '<b>Hello world ?</b>' // html body
};

/* GET home page. */
router.get('/', function(req, res, next) {
  res.render('index', {
    title: 'Express',
    city: [
      'Ð¡Ð¾Ð»Ð¸ÐºÐ°Ð¼ÑÐº',
      'Ð‘ÐµÑ€ÐµÐ·Ð½Ð¸ÐºÐ¸',
      'ÐÐ»ÐµÐºÑÐ°Ð½Ð´Ñ€Ð¾Ð²ÑÐº',
      'Ð¯Ð¹Ð²Ð°',
      'ÐšÐ¸Ð·ÐµÐ»',
      'Ð“ÑƒÐ±Ð°Ñ…Ð°',
      'Ð£ÑÐ¾Ð»ÑŒÐµ',
      'ÐšÑ€Ð°ÑÐ½Ð¾Ð²Ð¸ÑˆÐµÑ€ÑÐº',
      'Ð§ÐµÑ€Ð´Ñ‹Ð½ÑŒ',
      'ÐÑ‹Ñ€Ð¾Ð±',
      'ÐŸÐµÑ€Ð¼ÑŒ',
      'Ð”Ð¾Ð±Ñ€ÑÐ½ÐºÐ°',
      'ÐšÑ€Ð°ÑÐ½Ð¾ÐºÐ°Ð¼ÑÐº',
      'Ð§ÑƒÑÐ¾Ð²Ð¾Ð¹',
      'Ð›Ñ‹ÑÑŒÐ²Ð°',
      'Ð“Ð¾Ñ€Ð½Ð¾Ð·Ð°Ð²Ð¾Ð´ÑÐº',
      'ÐšÑƒÐ½Ð³ÑƒÑ€',
      'ÐžÑÐ°',
      'Ð§ÐµÑ€Ð½ÑƒÑˆÐºÐ°',
      'ÐšÑƒÐ´Ñ‹Ð¼ÐºÐ°Ñ€',
      'ÐÑ‹Ñ‚Ð²Ð°',
      'Ð§Ð°Ð¹ÐºÐ¾Ð²ÑÐºÐ¸Ð¹',
      '*Ð´Ñ€ÑƒÐ³Ð¾Ð¹'
    ],
    prof: [
      'ÐœÐ°ÑˆÐ¸Ð½Ð¸ÑÑ‚ Ð¿Ð¾Ð´ÑŠÐµÐ¼Ð½Ñ‹Ñ… Ð¼Ð°ÑˆÐ¸Ð½',
      'ÐÐ¿Ð¿Ð°Ñ€Ð°Ñ‚Ñ‡Ð¸Ðº ÑÐ¾ÑÑƒÐ´Ð¾Ð², Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‰Ð¸Ñ… Ð¿Ð¾Ð´ Ð´Ð°Ð²Ð»ÐµÐ½Ð¸ÐµÐ¼',
      'ÐšÑ€Ð°Ð½Ð¾Ð²Ñ‰Ð¸ÐºÐ¸ Ð¼Ð¾ÑÑ‚Ð¾Ð²Ñ‹Ñ…, ÐºÐ¾Ð·Ð»Ð¾Ð²Ñ‹Ñ…, Ð±Ð°ÑˆÐµÐ½Ð½Ñ‹Ñ…, ÑÑ‚Ñ€ÐµÐ»Ð¾Ð²Ñ‹Ñ… ÑÐ°Ð¼Ð¾Ñ…Ð¾Ð´Ð½Ñ‹Ñ…, ÐºÑ€Ð°Ð½Ð¾Ð²-Ð¼Ð°Ð½Ð¸Ð¿ÑƒÐ»ÑÑ‚Ð¾Ñ€Ð¾Ð², Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ñ…, Ð¿Ð»Ð°Ð². ÐºÑ€Ð°Ð½Ð¾Ð²',
      'ÐŸÐµÑÐºÐ¾ÑÑ‚Ñ€ÑƒÐ¹Ñ‰Ð¸Ðº',
      'ÐœÐ°Ð»ÑÑ€',
      'Ð¡Ñ‚Ð²Ð¾Ð»Ð¾Ð²Ð¾Ð¹',
      'Ð›Ð°Ð±Ð¾Ñ€Ð°Ð½Ñ‚ Ñ…Ð¸Ð¼Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°',
      'Ð›Ð¸Ñ„Ñ‚Ñ‘Ñ€',
      'ÐœÐ°ÑˆÐ¸Ð½Ð¸ÑÑ‚ Ð»ÐµÐ±Ñ‘Ð´Ð¾Ðº',
      'ÐœÐ°ÑˆÐ¸Ð½Ð¸ÑÑ‚ ÐºÐ¾Ð¼Ð¿Ñ€ÐµÑÑÐ¾Ñ€Ð½Ñ‹Ñ… ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¾Ðº',
      'ÐžÐ¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€ ÐºÐ¾Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¹, Ð¢ÐœÐ£',
      'ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð», Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°ÑŽÑ‰Ð¸Ð¹ ÑÐ¾ÑÑƒÐ´Ñ‹, Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‰Ð¸Ðµ Ð¿Ð¾Ð´ Ð´Ð°Ð²Ð»ÐµÐ½Ð¸ÐµÐ¼',
      'ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð», Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°ÑŽÑ‰Ð¸Ð¹ Ð³Ð°Ð·Ð¾Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð»ÑÑŽÑ‰ÐµÐµ Ð¸ Ð³Ð°Ð·Ð¾Ñ€Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÑŽÑ‰ÐµÐµ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ',
      'ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð» Ð¿Ð¾ Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸ÑŽ, Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ñƒ Ð¸ ÑÐºÑÐ¿Ð»ÑƒÐ°Ñ‚Ð°Ñ†Ð¸Ð¸ Ð¢Ð­Ð£',
      'Ð Ð°Ð±Ð¾Ñ‡Ð¸Ð¹ Ð»ÑŽÐ»ÐµÐº Ð¿Ð¾Ð´ÑŠÑ‘Ð¼Ð½Ð¸ÐºÐ¾Ð² (Ð²Ñ‹ÑˆÐµÐº)/Ñ„Ð°ÑÐ°Ð´Ð½Ñ‹Ñ… Ð¿Ð¾Ð´ÑŠÑ‘Ð¼Ð½Ð¸ÐºÐ¾Ð²',
      'Ð ÐµÐ·Ñ‡Ð¸Ðº Ð½Ð° ÑÐ¶Ð¸Ð¶ÐµÐ½Ð½Ð¾Ð¼ Ð³Ð°Ð·Ðµ Ð¿Ñ€Ð¾Ð¿Ð°Ð½-Ð±ÑƒÑ‚Ð°Ð½Ðµ',
      'Ð¡Ñ‚Ñ€Ð¾Ð¿Ð°Ð»ÑŒÑ‰Ð¸Ðº ÐŸÐ¡',
      'Ð¡Ñ‚Ñ€Ð¾Ð¿Ð°Ð»ÑŒÑ‰Ð¸Ðº Ñ Ð¿Ñ€Ð°Ð²Ð¾Ð¼ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ ÐŸÐ¡, ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼Ñ‹Ñ… Ñ Ð¿Ð¾Ð»Ð°',
      'Ð¡Ð»ÐµÑÐ°Ñ€ÑŒ-Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ð½Ð¸Ðº Ð¿Ð¾ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ñƒ Ð¸ Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸ÑŽ ÐŸÐ¡',
      'Ð¡Ð»ÐµÑÐ°Ñ€ÑŒ Ð¿Ð¾ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ñƒ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‚Ð¾Ð¿Ð»Ð¸Ð²Ð¾Ð¿Ð¾Ð´Ð°Ñ‡Ð¸',
      'Ð¡Ð»ÐµÑÐ°Ñ€ÑŒ Ð¿Ð¾ ÑÐºÑÐ¿Ð»ÑƒÐ°Ñ‚Ð°Ñ†Ð¸Ð¸ Ð¸ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ñƒ Ð³Ð°Ð·Ð¾Ð²Ð¾Ð³Ð¾ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ',
      'Ð¡Ð»Ð¸Ð²Ñ‰Ð¸Ðº-Ð·Ð°Ð»Ð¸Ð²Ñ‰Ð¸Ðº Ð“Ð¡Ðœ (Ð³Ð¾Ñ€ÑŽÑ‡ÐµÑÐ¼Ð°Ð·Ð¾Ñ‡Ð½Ñ‹Ñ… Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²)',
      'Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ð¼Ð¾Ð½Ñ‚Ñ‘Ñ€ Ð¿Ð¾ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ñƒ Ð¸ Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸ÑŽ ÐŸÐ¡'
    ]
  });
});

router.post('/', function(req, res){
  transporter.sendMail(mailOptions, (error, info) => {
    if (error) {
        return console.log(error);
    }
    console.log('Message %s sent: %s', info.messageId, info.response);
  });
});

module.exports = router;